
@model Sklep.Models.ModelViews.ContactFormView

@{
    ViewBag.Title = "Details";
}


<style>
    #contentDetails {
        display: grid;
        justify-items: center;
        width: 100%;
        height: 100%;
        align-items: flex-start;
        padding-top: 50px;
    }

    .backBtn {
        display: grid;
        color: #fff;
        text-decoration: none;
        padding: 10px 20px;
        border-radius: 5px;
        background-color: #FC6D84;
        font-size: 16px;
        cursor: pointer;
        transition: 0.1s;
        width: max-content;
        grid-template-columns: max-content max-content;
        grid-column-gap: 5px;
    }

    .cont {
        width: 60%;
        display: grid;
        justify-items: left;
    }

    .contentProduct {
        background-color: #fff;
        box-shadow: rgba(0,0,0,0.25) 0px 0px 3px 1px;
        border-radius: 5px;
        width: 100%;
        display: grid;
        padding: 30px;
        margin-top: 30px;
        margin-bottom: 30px;
    }

    .backBtn > a {
        color: #fff;
        text-decoration: none;
    }

    .backBtn:hover {
        padding: 7px 20px 13px 20px;
        transition: 0.1s;
    }

    .CategoryName {
        color: #787878;
    }

    .sectionMain {
        display: grid;
        width: 100%;
        grid-template-columns: 10fr min-content 20fr 15fr;
        place-items: flex-start;
        grid-column-gap: 10px;
        padding-left: 30px;
        padding-right: 30px;
    }

    .picture {
        display: grid;
        width: 100%;
        grid-template-columns: 1fr;
        grid-row-gap: 20px;
        place-items: flex-start;
        justify-items: center;
    }

    .informaction {
        display: grid;
        width: 100%;
        grid-template-columns: 1fr;
        grid-row-gap: 20px;
        place-items: flex-start;
        justify-items: center;
    }

    .buySection {
        display: grid;
        width: 100%;
        height: 80%;
        grid-template-columns: 1fr;
        grid-template-rows: 80% 20%;
        place-items: flex-start;
        justify-items: right;
    }

    .verticalLine {
        background-color: #eeeeed;
        height: 80%;
        margin-top: 10%;
        width: 1px;
        margin-left: 30px;
        margin-right: 30px;
        content: '';
    }

    .buyButton {
        display: grid;
        color: #fff;
        text-decoration: none;
        padding: 10px 40px;
        border-radius: 5px;
        background-color: #FC6D84;
        font-size: 18px;
        font-weight: 500;
        cursor: pointer;
        transition: 0.1s;
        width: max-content;
    }

    .sectionDescription {
        padding-left: 50px;
        padding-right: 50px;
        padding-bottom: 50px;
    }

    .descriptionSection {
        width: 100%;
        font-weight: 400;
        font-family: Roboto;
        text-align: left;
        font-size: 18px;
        color: #000;
        text-indent: 10px;
        white-space: normal;
    }

    .sectionTechnicalData {
        padding-left: 50px;
        padding-right: 50px;
        padding-bottom: 50px;
    }

    .sectionComents {
        padding-left: 50px;
        padding-right: 50px;
        padding-bottom: 50px;
    }


    .contentSection {
        display: grid;
        width: 90%;
        margin-left: 5%;
        margin-right: 5%;
        grid-template-columns: 100%;
        grid-row-gap: 20px;
        justify-items: center;
        align-items: flex-start;
        padding-top: 30px;
    }

    .technicalTable {
        width: min-content;
    }

        .technicalTable > tbody > tr {
            width: 100%;
            display: grid;
            grid-template-columns: 1fr 1fr;
            padding-left: 20px;
            padding-right: 20px;
        }

            .technicalTable > tbody > tr > th {
                width: max-content;
                padding-left: 50px;
                padding-right: 50px;
                padding-top: 10px;
                padding-bottom: 10px;
            }

            .technicalTable > tbody > tr:nth-of-type(even) {
                background-color: #EDEDED;
            }

            .technicalTable > tbody > tr:nth-of-type(odd) {
                background-color: #F7F7F7;
            }

            .technicalTable > tbody > tr > td {
                display: grid;
                justify-items: center;
                padding-top: 10px;
                padding-bottom: 10px;
            }

    .grayBtn {
        background-color: #eeeeed;
        width: 14px;
        height: 14px;
        display: grid;
        place-items: center;
        border-radius: 50%;
        content: '';
        cursor: pointer;
    }

        .grayBtn[selected] > .innerBtn {
            background-color: #FC6D84;
        }

    .innerBtn {
        background-color: #eeeeed;
        width: 8px;
        height: 8px;
        display: grid;
        place-items: center;
        border-radius: 50%;
        content: '';
    }

    .changeButtons {
        display: inline-grid;
        grid-template-columns: min-content min-content min-content;
        grid-column-gap: 10px;
        padding-bottom: 50px;
    }

    .comment {
        width: 60%;
        background-color: #eeeeed;
        border-radius: 5px;
        padding: 20px;
        display: grid;
        justify-items: flex-start;
        align-items: flex-start;
    }

    .buyButtonCont {
        width: max-content;
        height: auto;
        display: grid;
        grid-template-columns: min-content max-content;
    }

    .liczbaZamawiana {
        height: 100%;
        width: 60px;
        margin-right: -5px;
    }

        .liczbaZamawiana > input {
            height: 100%;
            width: 100%;
            font-size: 21px;
            text-indent: 5px;
        }
    .sectionComents > .contentSection > form{
        display: grid;
        grid-template-areas: "a b"
                             "c c"
                             "d d";
        grid-row-gap: 20px;
        grid-column-gap: 20px;

    }
        .sectionComents > .contentSection > form > .miniFormSection:nth-of-type(1) {
            grid-area: a;
            width: 100%;
        }
        .sectionComents > .contentSection > form > .miniFormSection:nth-of-type(2) {
            grid-area: b;
            width: 100%;
        }
        .sectionComents > .contentSection > form > .miniFormSection:nth-of-type(3) {
            grid-area: c;
            width: 100%;
        }
        .sectionComents > .contentSection > form > .miniFormSection:nth-of-type(3) > div> textarea{
            width: 100%;
            max-width: 100%;
        }
        .sectionComents > .contentSection > form > .miniFormSection:nth-of-type(4) {
                width: 100%;
                max-width: 100%;
                grid-area: d;
                place-items: center;
                display: grid;
                height: max-content;
                padding: 10px;
        }


</style>
<script>
    $(document).ready(function () {
        $.ajaxSetup({
            beforeSend: function (xhr) {
                xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
            }
        });
        $(".buyButton").click(function (event) {
            var productData = {
                ProduktId: @ViewBag.produkt.Id,
                Liczba: $('input[type=number][productId="' + @ViewBag.produkt.Id + '"]').val()
            };

            $.ajax({
                type: "POST",
                url: "/Busket/Add",
                data: JSON.stringify(productData),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (result) { }
            }).always(function () {
                location.reload(true);
            });
        });
    });
</script>
<content id="contentDetails">
    <div class="cont">
        <div class="backBtn">
            <svg width="20px" height="20px" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="m5.828 6.997 2.536 2.536-1.414 1.414L2 5.997l4.95-4.95L8.364 2.46 5.828 4.997H13a8 8 0 0 1 0 16H4v-2h9a6 6 0 0 0 0-12H5.828Z"></path>
            </svg>
            <a href="/Product/Products" style="text-decoration: none; color: #fff;">Wróć do wyszukiwania</a>
        </div>
        <div class="contentProduct">
            <div class="sectionMain">
                <div class="picture">
                    <img style="width: 30vh; height:30vh;" src="@ViewBag.produkt.ImageUrl" />
                    <div class="changeButtons">
                        <div class="grayBtn" selected><div class="innerBtn"></div></div>
                        <div class="grayBtn"><div class="innerBtn"></div></div>
                        <div class="grayBtn"><div class="innerBtn"></div></div>
                    </div>
                </div>
                <div class="verticalLine"></div>
                <div class="information">
                    <h3 class="ProductName">@ViewBag.produkt.Name</h3>
                    <h5 class="CategoryName">@ViewBag.produkt.CategoryName</h5>
                </div>
                <div class="buySection">
                    <div>
                        @{
                            if (ViewBag.produkt.DiscountName != null)
                            {
                                <div>Promocja - <strong>@ViewBag.produkt.DiscountName</strong></div>
                                <div class="productCena">Cena brutto <strong style="color: #FC6D84; font-size: 24px;">@{@ViewBag.produkt.BruttoPrice}zł/szt.</strong></div>
                                <div class="productCena" style="transform: scale(0.6);">Stara cena brutto <s><strong style="color: #FC6D84; font-size: 24px;">@{@ViewBag.produkt.BruttoPriceOld}zł/szt.</strong></s></div>
                                <div class="productCena">Cena netto <strong style="color: #FC6D84; font-size: 20px;">@{@ViewBag.produkt.NettoPrice}zł/szt.</strong></div>
                                <div class="productCena" style="transform: scale(0.6);">Stara cena netto <s><strong style="color: #FC6D84; font-size: 20px;">@{@ViewBag.produkt.NettoPriceOld}zł/szt.</strong></s></div>
                            }
                            else
                            {
                                <div class="productCena">Brutto <strong style="color: #FC6D84; font-size: 24px;">@{@ViewBag.produkt.BruttoPrice}zł/szt.</strong></div>
                                <div class="productCena">Netto <strong style="color: #FC6D84; font-size: 20px;">@{@ViewBag.produkt.NettoPrice}zł/szt.</strong></div>
                            }
                        }
                    </div>
                    <div>
                        <div class="buyButtonCont"><div class="liczbaZamawiana"><input type="number" productId="@ViewBag.produkt.Id" value="1" min="1" max="@ViewBag.produkt.StoreCount" step="1" /></div><div class="buyButton" productId="@ViewBag.produkt.Id">Dodaj do koszyka</div></div>
                        <h6>Pozostało @ViewBag.produkt.StoreCount sztuk</h6>
                    </div>

                </div>
            </div>
            <div class="sectionDescription">
                <h3 style="padding-left: 20px;"><strong>Opis</strong></h3>
                <hr />
                <div class="contentSection">
                    @{
                        foreach (var o in ViewBag.opis)
                        {
                            <div class="descriptionSection">@o.Opis</div>
                        }
                    }
                </div>

            </div>
            <div class="sectionTechnicalData">
                <h3 style="padding-left: 20px;"><strong>Dane techniczne</strong></h3>
                <hr />
                <div class="contentSection">

                    <table class="technicalTable">
                        <tr><th>Paramter</th><th>Wartość</th></tr>
                        @{
                            foreach (var p in ViewBag.parametry)
                            {
                                <tr><td>@p.Nazwa</td><td>@p.Wartosc</td></tr>
                            }
                        }
                    </table>

                </div>
            </div>
            <div class="sectionComents">
                <h3 style="padding-left: 20px;"><strong>Kontakt w sprawie produktu</strong> </h3>
                <hr />
                <div class="contentSection">
                    <h4>Zadaj pytanie do eksperta</h4>
                    <hr />
                    @using (Html.BeginForm("SendQuestionExpert", "Contact", new { produktId = ViewBag.produkt.Id }, FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                            <div class="miniFormSection">
                                @Html.LabelFor(model => model.email, htmlAttributes: new { @class = "" })
                                <div>
                                    @Html.EditorFor(model => model.email, new { htmlAttributes = new { @class = "" } })
                                    @Html.ValidationMessageFor(model => model.email, "", new { @class = "text-danger" })
                                </div>
                            </div>

                        <div class="miniFormSection">
                            @Html.LabelFor(model => model.name, htmlAttributes: new { @class = "" })
                            <div>
                                @Html.EditorFor(model => model.name, new { htmlAttributes = new { @class = "" } })
                                @Html.ValidationMessageFor(model => model.name, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="miniFormSection">
                           <label>Wiadomość dla experta</label>
                            <div>
                                @Html.TextAreaFor(model => model.message, new { htmlAttributes = new { @class = "" } })
                                @Html.ValidationMessageFor(model => model.message, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="miniFormSection">
                            <input type="submit" value="Wyślij zapytanie" class="backBtn" style="outline: none; border: none;" />
                        </div>
                    }

                    @{ if (ViewBag.response != null)
                        { <p>@ViewBag.response</p>}
                    }
                </div>
            </div>
            <div class="sectionComents">
                <h3 style="padding-left: 20px;"><strong>Oceny i komentarze</strong> </h3>
                <hr />
                <div class="contentSection">
                </div>
            </div>

            <a href="/Product/GetProductPdf/@ViewBag.produkt.Id">
                Pobierz plik pdf produktu
            </a>
        </div>
    </div>

</content>



